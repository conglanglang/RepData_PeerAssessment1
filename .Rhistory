arrive <- depart + hours(15) + minutes(50)
arrive <- depart + hours(15) + minutes(50)
nyc<-now("America/New_York")
swirl()
Sys.getlocale("LC_TIME")
library(lubridate)
help(package =lubridate)
this_day<-today()
this_day
year( this_day)
wday( this_day)
wday( this_day,label = TRUE)
this_moment<-now()
this_moment
minute(this_moment)
my_date<-ymd("1989-05-17")
my_date
class(my_date)
ymd("1989 May 17")
mdy("March 12, 1975")
mdy(25081985)
dmy(25081985)
ymd("192012")
ymd("1920/1/2")
dt1
ymd_hms(dt1)
hms("03:22:14")
dt2
ymd(dt2)
update(this_moment, hours = 8, minutes = 34, seconds = 55)
this_moment
this_moment<-update(this_moment, hours = 8, minutes = 34, seconds = 55)
this_moment
nyc<-now("America/New_York")
nyc
depart<-nyc + days(2)
depart
depart<-updare(depart,hours=17,minutes=34)
depart<-update(depart,hours=17,minutes=34)
depart
arrive<-depart+hours(15)+minutes(50)
with_tz()
?with_tz
with_tz("Asia/Hong_Kong")
arrive<-with_tz(arrive,"Asia/Hong_Kong")
arrive
last_time<-mdy("June 17, 2008",tz = "Singapore")
last_time
new_interval(arrive,last_time)
?new_interval
how_long<-new_interval(arrive,last_time)
how_long<-new_interval(last_time,arrive)
as.period(how_long)
stopwatch()
set.seed(1234)
par(mar = c(0, 0, 0, 0))
x <- rnorm(12, mean = rep(1:3, each = 4), sd = 0.2)
y <- rnorm(12, mean = rep(c(1, 2, 1), each = 4), sd = 0.2)
plot(x, y, col = "blue", pch = 19, cex = 2)
text(x + 0.05, y + 0.05, labels = as.character(1:12))
dataFrame <- data.frame(x = x, y = y)
dist(dataFrame)
dataFrame <- data.frame(x = x, y = y)
distxy <- dist(dataFrame)
hClustering <- hclust(distxy)
plot(hClustering)
myplclust <- function(hclust, lab = hclust$labels, lab.col = rep(1, length(hclust$labels)),
hang = 0.1, ...) {
## modifiction of plclust for plotting hclust objects *in colour*! Copyright
## Eva KF Chan 2009 Arguments: hclust: hclust object lab: a character vector
## of labels of the leaves of the tree lab.col: colour for the labels;
## NA=default device foreground colour hang: as in hclust & plclust Side
## effect: A display of hierarchical cluster with coloured leaf labels.
y <- rep(hclust$height, 2)
x <- as.numeric(hclust$merge)
y <- y[which(x < 0)]
x <- x[which(x < 0)]
x <- abs(x)
y <- y[order(x)]
x <- x[order(x)]
plot(hclust, labels = FALSE, hang = hang, ...)
text(x = x, y = y[hclust$order] - (max(hclust$height) * hang), labels = lab[hclust$order],
col = lab.col[hclust$order], srt = 90, adj = c(1, 0.5), xpd = NA, ...)
}
dataFrame <- data.frame(x = x, y = y)
distxy <- dist(dataFrame)
hClustering <- hclust(distxy)
myplclust(hClustering, lab = rep(1:3, each = 4), lab.col = rep(1:3, each = 4))
set.seed(143)
dataMatrix <- as.matrix(dataFrame)[sample(1:12), ]
heatmap(dataMatrix)
source('~/.active-rstudio-document')
rnorm(100,mean=0.26,sd=0.09)
rnorm(100,mean=0.26,sd=0.06)
xy=rnorm(100,mean=0.26,sd=0.06)
write.table(xy,file='xy',sep='\t',quote=F)
xy=rnorm(100,mean=0.26,sd=0.05)
write.table(xy,file='xy',sep='\t',quote=F)
write.table(xy,file='xy',sep='\t',quote=F)
xy=rnorm(100,mean=6,sd=3)
xy
write.table(xy,file='xy2',sep='\t',quote=F)
xy=rnorm(100,mean=6,sd=2)
write.table(xy,file='xy2',sep='\t',quote=F)
xy=rnorm(100,mean=6,sd=2)
write.table(xy,file='xy2',sep='\t',quote=F)
xy=rnorm(100,mean=6,sd=2.5)
write.table(xy,file='xy2',sep='\t',quote=F)
xy=rnorm(100,mean=4,sd=2)
write.table(xy,file='xy2',sep='\t',quote=F)
xy=rnorm(100,mean=4,sd=1.5)
write.table(xy,file='xy2',sep='\t',quote=F)
library(plyr)
dev.off()
## This first line will likely take a few seconds. Be patient!
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
library(dplyr)
library(plyr)
library(ggplot2)
#coal combustion-related sources
scc_temp<-data.frame(scc=as.character(SCC[, 1]),name=as.character(SCC[, 3]))
row_coal<-grep("Coal",as.character(scc_temp$name))
scc_coal<-scc_temp[row_coal,]
#coal combustion-related sources of the NEI
NEI_coal<-NEI[as.character(NEI$SCC) %in% as.character(scc_coal$scc),]
pro4<- ddply(NEI_coal,.(year),summarize,totle=sum(Emissions))
pro4$year<-as.Date(as.character(pro4$year),format="%Y")
options(scipen=200)
png(file = "plot4.png")
ggplot(pro4)+geom_histogram(aes(x=year,y=totle),stat="identity")
dev.off()
da<-read.csv("activity.csv",header=TRUE)
setwd("D:/wucong2/Downloads/RepData_PeerAssessment1")
da<-read.csv("activity.csv",header=TRUE)
View(da)
temp<-split(da,da[,c("date")],drop=TRUE)
result1<-lapply(temp,FUN=function(x) sum(x$steps))
result2<-lapply(temp,FUN=function(x) max(x$AMOUNT))
result<-cbind(result1,result2)
temp<-split(da,da[,c("date")],drop=TRUE)
result1<-lapply(temp,FUN=function(x) sum(x$steps))
result2<-lapply(temp,FUN=function(x) max(x$steps))
result<-cbind(result1,result2)
temp<-split(da,da[,c("date")],drop=TRUE)
result1<-lapply(temp,FUN=function(x) sum(x$steps))
result2<-lapply(temp,FUN=function(x) max(x$steps))
result<-cbind(result1,result2)
result
temp<-split(da,da[,c("date")],drop=TRUE)
numofstep<-lapply(temp,FUN=function(x) sum(x$steps))
numofstep
plot(hist(numofstep), col=rgb(0,0,1,1/4), xlim=c(0,10))
ptemp<-hist(numofstep)
plot(ptemp, col=rgb(0,0,1,1/4), xlim=c(0,10))
ptemp<-hist(numofstep[,1])
plot(ptemp, col=rgb(0,0,1,1/4), xlim=c(0,10))
ptemp<-hist(numofstep[,2])
plot(ptemp, col=rgb(0,0,1,1/4), xlim=c(0,10))
ptemp<-hist(numofstep[,2])
ptemp<-hist(numofstep[,1])
temp<-split(da,da[,c("date")],drop=TRUE)
result1<-lapply(temp,FUN=function(x) sum(x$steps))
result2<-lapply(temp,FUN=function(x) max(x$steps))
numofstep<-cbind(result1,result2)
ptemp<-hist(numofstep[,1])
plot(ptemp, col=rgb(0,0,1,1/4), xlim=c(0,10))
numofstep[,1]
numofstep
numofstep$result1
numofstep[,2]
